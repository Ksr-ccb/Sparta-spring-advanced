# ğŸ’¡ [Spring 6ê¸°] Spring ì‹¬í™” ì£¼ì°¨ ê°œì¸ ê³¼ì œ

### ğŸ•°ï¸ ê°œë°œ ê¸°ê°„
25.04.15 - 25.04.21

## âœï¸ê³¼ì œ ë‚´ìš©
### <í•„ìˆ˜> 
1. ì½”ë“œê°œì„ 
   -  Early Return
   -  ë¶ˆí•„ìš”í•œ if-else í”¼í•˜ê¸°
   -  Validation
3. N+1ë¬¸ì œ
   - N+1 ë¬¸ì œ í•´ê²° ë°©ë²•
5. í…ŒìŠ¤íŠ¸ì½”ë“œ ì—°ìŠµ
   - ì„±ê³µ ì¼€ì´ìŠ¤ ì˜¤ë¥˜ ìˆ˜ì •
   - ì˜ˆì™¸ì²˜ë¦¬ ì¼€ì´ìŠ¤ ì˜¤ë¥˜ ìˆ˜ì •
í’€ì´ë‚´ìš©ì€ readme ì•„ë˜ì— ìˆìŒ.

### <ë„ì „>
1. API ë¡œê¹…
   -  Interceptorì™€ AOPë¥¼ í™œìš©í•œ API ë¡œê¹…
3. ë¬¸ì œ ì •ì˜ ë° í•´ê²°
   - <a href= "https://velog.io/@tofha054/Spring-ì‹¬í™”-ê°œì¸-ê³¼ì œ-Lv.5-ì½”ë“œ-ê°œì„ "> í’€ì´ ë§í¬ </a>
5. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
![img.png](img.png)
![image](https://github.com/user-attachments/assets/f258703a-dc59-4d73-9214-c0b185aa2d84)
ì„œë¹„ìŠ¤ ë ˆì´ì–´ë§Œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

<br><hr><br>
# ğŸ“š ê³¼ì œ í’€ì´ ê³¼ì •
## í•„ìˆ˜ Lv.1
### 1. Early Return
ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”ë‚˜ ë‹¤ë¥¸ ê°’ë“¤ì„ êº¼ë‚´ì„œ ê°ì²´ë¥¼ ë§Œë“¤ê¸° ì „ì— ê°€ì…ì„ í•  ìˆ˜ ìˆëŠ” ì „ì œì¡°ê±´ì„ í™•ì¸í•˜ë„ë¡ í•œë‹¤.
![image](https://github.com/user-attachments/assets/943ba8db-03d4-422f-b841-eee8964fa8ce)
<br><br>
### 2. Rid of if-else
ì´ë¯¸ ifë¬¸ì„ ë§Œì¡±í•˜ëŠ” ì¡°ê±´ì€ throwìœ¼ë¡œ ë©”ì„œë“œê°€ ì¢…ë£Œë˜ê¸° ë•Œë¬¸ì— ì•„ë˜ì˜ elseë¬¸ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.
- (â€» ì»¤ë°‹ ì‹¤ìˆ˜ë¡œ `2. Rid of if-else` ì™€ `3. Validation`ê°€ ì„œë¡œ ë°”ë€Œì–´ìˆìŠµë‹ˆë‹¤! )
![image](https://github.com/user-attachments/assets/41a0b606-d946-47db-abc8-79040b3933eb)
<br><br>
### 3. Validation
- UserChangePasswordRequest ì—ì„œ @Pattern ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©ìœ¼ë¡œ ì •ê·œì‹ì„ ì¶”ê°€.
- ì…ë ¥ê²€ì¦ì€ ì„œë¹„ìŠ¤ë‹¨ì—ì„œ ë”ì´ìƒ í•„ìš”í•˜ì§€ ì•ŠìŒ.
- (â€» ì»¤ë°‹ ì‹¤ìˆ˜ë¡œ `2. Rid of if-else` ì™€ `3. Validation`ê°€ ì„œë¡œ ë°”ë€Œì–´ìˆìŠµë‹ˆë‹¤! )
![image](https://github.com/user-attachments/assets/0098f1cc-9ec5-4209-a010-471ab5327755)
![image](https://github.com/user-attachments/assets/1dc1ce1b-7565-40eb-9654-9a5f19e91b4c)


<br><br><br><br>
## í•„ìˆ˜ Lv.2
### N+1 ë¬¸ì œ í•´ê²° ë°©ë²•
- ê¸°ì¡´
   -  íŠ¹ì • í…Œì´ë¸” ì¡°ì¸ì‹œ fetchì¡°ì¸ì„ ì‚¬ìš©í•˜ì—¬ ì¡°ì¸ ê²°ê³¼ê°’ì— ì¤‘ë³µê°’ì´ ìˆì„ ê²½ìš° ê°ì²´ í•˜ë‚˜ë§Œì„ ë°”ë¼ë³´ë„ë¡ í•¨.
   - fetch ì¡°ì¸ì„ í•˜ë©´ ëª¨ë“  entity ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¡œ ê´€ë¦¬ë˜ê¸° ë–„ë¬¸ì— SQL í•œë²ˆë§Œìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ.
   - => N+1 ë¬¸ì œ í•´ê²°

- `@EntityGraph` ê¸°ë°˜ì˜ êµ¬í˜„ìœ¼ë¡œ ìˆ˜ì •
   - @EntityGraph ëŠ” íŠ¹ì • ì—”í‹°í‹°ì¸ Todo ì™€ User ê°€ 1:ë‹¤ ì–‘ë°©í–¥ ê´€ê³„ë¥¼ ê°–ê³ ìˆì„ ë•Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
   - í•˜ì§€ë§Œ @EntityGraph ëŠ” left outer join ë§Œì„ ì§€ì›í•˜ë‹ˆ ë‹¤ë¥¸ ë°©ì‹ì´ í•„ìš”í•˜ë©´ ì§ì ‘ JPQL ì‘ì„±í•´ì•¼ í•œë‹¤.
![image](https://github.com/user-attachments/assets/f0a1ee29-fd79-406b-99d2-42b4019cd8b7)
<br><br><br><br>
## í•„ìˆ˜ Lv.3
### 1. ì˜ˆìƒëŒ€ë¡œ ì„±ê³µí•˜ëŠ”ì§€ì— ëŒ€í•œ ì¼€ì´ìŠ¤
matches í•¨ìˆ˜ë¥¼ ì§ì ‘ë³´ë©´ íŒŒë¼ë¯¸í„°ì˜ ìˆœì„œê°€ (String rawPassword, String encodedPassword) ë¡œ ë“¤ì–´ì™€ì•¼í•œë‹¤.
![image](https://github.com/user-attachments/assets/ad88458a-e4b4-4b3f-8ec1-a1a77b772a76)
<br><br>
### 2. ì˜ˆìƒëŒ€ë¡œ ì˜ˆì™¸ì²˜ë¦¬ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì¼€ì´ìŠ¤
#### 1.manager_ëª©ë¡_ì¡°íšŒ_ì‹œ_Todoê°€_ì—†ë‹¤ë©´_NPE_ì—ëŸ¬ë¥¼_ë˜ì§„ë‹¤()
- NullPointerException ì´ ì•„ë‹ˆë¼ InvalidRequestException ì´ ë°œìƒí•¨.
- getManagers í•¨ìˆ˜ì—ì„œ ì‹¤ì œë¡œ ë˜ì§€ëŠ” ì—ëŸ¬ë©”ì‹œì§€ì— ë§ì¶°ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ë¹„êµí•˜ëŠ” ë¬¸ìë„ ë³€ê²½
![image](https://github.com/user-attachments/assets/be961269-205f-47ce-95bb-ec35c8f6efd9)

<br><br>
#### 2. comment_ë“±ë¡_ì¤‘_í• ì¼ì„_ì°¾ì§€_ëª»í•´_ì—ëŸ¬ê°€_ë°œìƒí•œë‹¤()
saveComment í•¨ìˆ˜ì—ì„œ í•  ì¼ì„ ì°¾ì§€ ëª»í–ˆì„ ë•Œ throwí•˜ëŠ” ì˜ˆì™¸ì˜ ì¢…ë¥˜ëŠ” 'InvalidRequestException' ë¼ì„œ ë°”ê¿”ì¤Œ.
![image](https://github.com/user-attachments/assets/cd9753c8-82ab-4e4f-a885-874db665bc77)

<br><br>
#### 3.todoì˜_userê°€_nullì¸_ê²½ìš°_ì˜ˆì™¸ê°€_ë°œìƒí•œë‹¤()
- ì¡°ê±´ì‹ì—ì„œ todo.getUser() ì„ ì‹œë„í• ë•Œë¶€í„° Null ì´ ë°˜í™˜ë˜ëŠ”ë°, getId() í˜¸ì¶œí•˜ë©´ NPE ì´ ì¼ì–´ë‚  ìˆ˜ ë°–ì—ì—†ë‹¤.
- ì•ˆì „í•˜ê²Œ todo.getUser() ì—ì„œ í•œë²ˆ NULL ê²€ì‚¬ë¥¼ í•œ ë’¤, ê·¸ë’¤ì— ì²´ì´ë‹ìœ¼ë¡œ Id ê°’ì„ ë°›ì•„ì™€ì•¼ í•œë‹¤.

- â€» ë³„ê°œë¡œ ì—ëŸ¬ë©”ì‹œì§€ì¸ `"ë‹´ë‹¹ìë¥¼ ë“±ë¡í•˜ë ¤ê³  í•˜ëŠ” ìœ ì €ê°€ ì¼ì •ì„ ë§Œë“  ìœ ì €ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."`ë¼ëŠ” ë§ì´ ì–´ìƒ‰í•´ì„œ
  `"ë‹´ë‹¹ìë¥¼ ë“±ë¡í•˜ë ¤ê³  í•˜ëŠ” ìœ ì €ë‚˜ ì¼ì •ì„ ë§Œë“  ìœ ì €ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."`ìœ¼ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/165f5b5c-7787-4265-96d5-00a63cb473f3)
